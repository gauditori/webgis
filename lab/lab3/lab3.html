<html>
<head>
<title>Lab3: Web-based Mapping Using OpenLayers</title>
<script src="https://cdn.jsdelivr.net/npm/ol@v10.6.1/dist/ol.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol@v10.6.1/ol.css">
</head>
<body>
<h3>Lab3: Web-based Mapping Using OpenLayers</h3>
<h4>Author: Griffin Auditori</h4>
<div id="map" class="map", style = "width:800px; height: 600px"></div>
<script>
var OSM = new ol.layer.Tile({
source: new ol.source.OSM()
});
var map = new ol.Map({
layers: [OSM],
target: 'map',
view: new ol.View({
projection: 'EPSG:3857',
center: [-10997148, 4569099],
zoom: 4
})
});
var nycExtent4326 = [-84.32178200052,33.85116926668266,-75.45981513195132,36.5881334409244];
var nycExtent3857 = ol.proj.transformExtent(nycExtent4326, 'EPSG:4326', 'EPSG:3857');
map.getView().fit(nycExtent3857, {
size: map.getSize(),
padding: [20, 20, 20, 20],
duration: 300
});
</script>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Lab 3: Web-based Mapping Using OpenLayers</title>

<!-- OpenLayers -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol@v10.6.1/ol.css">
<script src="https://cdn.jsdelivr.net/npm/ol@v10.6.1/dist/ol.js"></script>

<!-- LayerSwitcher -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol-layerswitcher@4.1.2/dist/ol-layerswitcher.css">
<script src="https://cdn.jsdelivr.net/npm/ol-layerswitcher@4.1.2/dist/ol-layerswitcher.js"></script>

<style>
    #map {
        width: 800px;
        height: 600px;
    }
</style>

</head>
<body>

<div id="map" class="map"></div>

<script>
// -------------------- BASE LAYERS --------------------

// OSM basemap
var OSM = new ol.layer.Tile({
    title: "OSM",
    type: "base",
    visible: false,
    source: new ol.source.OSM()
});

// Azure Maps Key (MUST BE ONE LINE!)
var AZURE_KEY = "6srLl2o3dGC8xAqJVrOEtVGTFj1ujl40lKOoKJD6f1K3XLS2U5JAJQQJ99BIACYeBjFZ86DdAAAgAZMP4fGn";

var azureRoad = new ol.layer.Tile({
    title: "Azure Maps (Road)",
    type: "base",
    visible: true,
    source: new ol.source.XYZ({
        url:
            "https://atlas.microsoft.com/map/tile?api-version=2022-08-01" +
            "&tilesetId=microsoft.base.road&zoom={z}&x={x}&y={y}" +
            "&subscription-key=" + AZURE_KEY,
        crossOrigin: "anonymous"
    })
});

// Group base layers
var baseGroup = new ol.layer.Group({
    title: "Base maps",
    layers: [azureRoad, OSM]
});

// -------------------- WMS LAYER --------------------
var wms = new ol.layer.Tile({
    title: "States",
    source: new ol.source.TileWMS({
        url: "https://ahocevar.com/geoserver/wms",
        params: {
            "LAYERS": "topp:states",
            "TILED": true,
            "FORMAT": "image/png",
            "TRANSPARENT": true
        },
        serverType: "geoserver",
        transition: 0
    })
});

// -------------------- MAP --------------------
var map = new ol.Map({
    target: "map",
    layers: [baseGroup, wms],
    view: new ol.View({
        center: [-10997148, 4569099], // USA center
        zoom: 4
    })
});

// Add Layer Switcher
map.addControl(new ol.control.LayerSwitcher({ tipLabel: "Legend" }));

</script>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Lab 3: Web-based Mapping Using OpenLayers</title>

<!-- OpenLayers -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol@v10.6.1/ol.css">
<script src="https://cdn.jsdelivr.net/npm/ol@v10.6.1/dist/ol.js"></script>

<!-- LayerSwitcher -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol-layerswitcher@4.1.2/dist/ol-layerswitcher.css">
<script src="https://cdn.jsdelivr.net/npm/ol-layerswitcher@4.1.2/dist/ol-layerswitcher.js"></script>

<style>
    #map {
        width: 800px;
        height: 600px;
    }
</style>

</head>
<body>

<div id="map" class="map"></div>

<script>
// -------------------- BASE LAYERS --------------------

var OSM = new ol.layer.Tile({
    title: "OSM",
    type: "base",
    visible: false,
    source: new ol.source.OSM()
});

var AZURE_KEY = "6srLl2o3dGC8xAqJVrOEtVGTFj1ujl40lKOoKJD6f1K3XLS2U5JAJQQJ99BIACYeBjFZ86DdAAAgAZMP4fGn";

var azureRoad = new ol.layer.Tile({
    title: "Azure Maps (Road)",
    type: "base",
    visible: true,
    source: new ol.source.XYZ({
        url:
            "https://atlas.microsoft.com/map/tile?api-version=2022-08-01" +
            "&tilesetId=microsoft.base.road&zoom={z}&x={x}&y={y}" +
            "&subscription-key=" + AZURE_KEY,
        crossOrigin: "anonymous"
    })
});

// Group base layers
var baseGroup = new ol.layer.Group({
    title: "Base maps",
    layers: [azureRoad, OSM]
});

// -------------------- WMS (ONLY North Carolina) --------------------
var wms = new ol.layer.Tile({
    title: "North Carolina (WMS)",
    source: new ol.source.TileWMS({
        url: "https://ahocevar.com/geoserver/wms",
        params: {
            "LAYERS": "topp:states",
            "TILED": true,
            "FORMAT": "image/png",
            "TRANSPARENT": true,
            "CQL_FILTER": "STATE_NAME='North Carolina'"   // <--- THIS FILTERS NC ONLY
        },
        serverType: "geoserver",
        transition: 0
    })
});

// -------------------- MAP --------------------
var map = new ol.Map({
    target: "map",
    layers: [baseGroup, wms],
    view: new ol.View({
        center: [-80, 35.5],  // NC center
        zoom: 7
    })
});

// -------------------- FIT MAP TO NC --------------------
var ncExtent4326 = [-84.3219, 33.8423, -75.4606, 36.5881]; // NC bounding box

var ncExtent3857 = ol.proj.transformExtent(
    ncExtent4326,
    "EPSG:4326",
    "EPSG:3857"
);

map.getView().fit(ncExtent3857, {
    size: map.getSize(),
    padding: [20, 20, 20, 20],
    duration: 350
});

// Add Layer Switcher
map.addControl(new ol.control.LayerSwitcher({ tipLabel: "Legend" }));

</script>
</body>
</html>
